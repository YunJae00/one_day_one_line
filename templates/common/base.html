<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}하루 한 줄{% endblock %}</title>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-2FPEX0TD7V"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());
        gtag('config', 'G-2FPEX0TD7V');
    </script>

    {% load static %}
    <link rel="shortcut icon" type="image/png" href="{% static 'images/favicon.ico' %}"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    {% block extra_head %}{% endblock %}
    {% block extra_css %}{% endblock %}
</head>
<body class="d-flex flex-column min-vh-100">
<!-- 상단 고정 헤더 -->
<header class="py-3 border-bottom">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-6 d-flex align-items-center">
                <a href="{% url 'home' %}" class="text-decoration-none">
                    <span class="fw-bold" style="color: #4288EE; font-size: 1.5rem;">하루 한 줄</span>
                </a>
            </div>
            <div class="col-6 text-end">
                {% if user.is_authenticated %}
                    <a href="{% url 'accounts:profile' %}" class="text-decoration-none me-3 d-inline-block">마이페이지</a>
                    <a href="{% url 'accounts:logout' %}" class="btn btn-outline-primary btn-sm">로그아웃</a>
                {% else %}
                    <a href="{% url 'accounts:login' %}" class="text-decoration-none me-3 d-inline-block">로그인</a>
                    <a href="{% url 'accounts:register' %}" class="btn btn-primary btn-sm">구독하기</a>
                {% endif %}
            </div>
        </div>
    </div>
</header>

<div class="message-box page-wrapper flex-grow-1">
    <!-- 메시지는 컨테이너 내부에 표시 -->
    {% if messages %}
        <div class="container">
        <div class="messages mt-3">
        {% for message in messages %}
            {% if message.tags == 'success' %}
                <div class="alert alert-success"
                     style="background-color: #d4edda !important; border: 1px solid #c3e6cb !important; color: #155724 !important; position: relative; border-radius: 10px; padding: 15px 40px 15px 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); display: flex; align-items: center; margin-bottom: 10px; opacity: 1 !important;">
            {% elif message.tags == 'error' %}
                <div class="alert alert-danger"
                     style="background-color: #f8d7da !important; border: 1px solid #f5c6cb !important; color: #721c24 !important; position: relative; border-radius: 10px; padding: 15px 40px 15px 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); display: flex; align-items: center; margin-bottom: 10px; opacity: 1 !important;">
            {% elif message.tags == 'warning' %}
                <div class="alert alert-warning"
                     style="background-color: #fff3cd !important; border: 1px solid #ffeeba !important; color: #856404 !important; position: relative; border-radius: 10px; padding: 15px 40px 15px 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); display: flex; align-items: center; margin-bottom: 10px; opacity: 1 !important;">
            {% elif message.tags == 'info' %}
                <div class="alert alert-info"
                     style="background-color: #d1ecf1 !important; border: 1px solid #bee5eb !important; color: #0c5460 !important; position: relative; border-radius: 10px; padding: 15px 40px 15px 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); display: flex; align-items: center; margin-bottom: 10px; opacity: 1 !important;">
            {% else %}
                <div class="alert"
                     style="background-color: #f8f9fa !important; border: 1px solid #ddd !important; color: #333 !important; position: relative; border-radius: 10px; padding: 15px 40px 15px 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); display: flex; align-items: center; margin-bottom: 10px; opacity: 1 !important;">
            {% endif %}
        {{ message }}
        <!-- 닫기 버튼 -->
        <button type="button" class="btn-close" aria-label="닫기"
                style="position: absolute; top: 50%; right: 10px; transform: translateY(-50%); background: none; border: none; font-size: 1.5rem; line-height: 1; color: inherit; opacity: 0.5; transition: opacity 0.3s ease;">
            &times;
        </button>
        </div>
        {% endfor %}
    </div>
    </div>
    {% endif %}

    <!-- 컨텐츠는 각 템플릿에서 관리 -->
    {% block content %}{% endblock %}
    </div>

    <footer class="py-3 border-top">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6 col-sm-12 mb-3 mb-md-0 text-center text-md-start">
                    <p class="footer-copyright">© 2025 하루 한 줄. All rights reserved.</p>
                    <p class="text-muted mb-0">이메일로 받아보는 유용한 지식</p>
                </div>

                <div class="col-md-6 col-sm-12 text-center text-md-end footer-links">
                <span class="footer-link">
                    이메일: <span id="email-text" style="user-select: all;">1day1line1@gmail.com</span>
                </span>
                    <a href="https://github.com/YunJae00/one_day_one_line" class="footer-link"
                       target="_blank">GitHub</a>
                    <a href="https://walla.my/v/pd3lg0soG1tGdYZPb61S" class="footer-link" target="_blank">문의사항 및 피드백</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'js/main.js' %}"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>